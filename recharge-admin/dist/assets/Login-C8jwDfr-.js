import{d as x,r as m,a as b,c as h,b as r,e as a,w as t,F as k,u as B,o as I,_ as L,I as N,f as p,g as R,B as S,h as U,i as d,j as q}from"./index-Djgp8zeB.js";import{r as z}from"./request-npLowYHc.js";import{U as C}from"./UserOutlined-xGvqhODp.js";import{L as O}from"./LockOutlined-CL4E4fcf.js";const V={class:"login-container"},F={class:"login-box"},j=x({__name:"Login",setup(A){const _=B(),c=m(),n=m(!1),o=b({username:"",password:""}),f={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},g=async()=>{var l,e;try{await c.value.validate()}catch{return}n.value=!0;try{const s=await z.post("/api/admin/auth/login",o);s.data.code===200?(localStorage.setItem("admin_token",s.data.data.token),localStorage.setItem("admin_user",JSON.stringify(s.data.data)),d.success("登录成功"),_.push("/dashboard")):d.error(s.data.message||"登录失败")}catch(s){d.error(((e=(l=s.response)==null?void 0:l.data)==null?void 0:e.message)||"登录失败")}finally{n.value=!1}};return(l,e)=>{const s=N,i=L,v=R,y=S,w=k;return I(),h("div",V,[r("div",F,[e[3]||(e[3]=r("div",{class:"login-header"},[r("h1",{class:"login-title"},"充值平台管理后台"),r("p",{class:"login-subtitle"},"Recharge Admin System")],-1)),a(w,{model:o,rules:f,ref_key:"formRef",ref:c,layout:"vertical",class:"login-form"},{default:t(()=>[a(i,{name:"username"},{default:t(()=>[a(s,{value:o.username,"onUpdate:value":e[0]||(e[0]=u=>o.username=u),placeholder:"请输入用户名",size:"large"},{prefix:t(()=>[a(p(C),{class:"text-gray-400"})]),_:1},8,["value"])]),_:1}),a(i,{name:"password"},{default:t(()=>[a(v,{value:o.password,"onUpdate:value":e[1]||(e[1]=u=>o.password=u),placeholder:"请输入密码",size:"large"},{prefix:t(()=>[a(p(O),{class:"text-gray-400"})]),_:1},8,["value"])]),_:1}),a(i,null,{default:t(()=>[a(y,{type:"primary",size:"large",block:"",loading:n.value,onClick:g},{default:t(()=>[...e[2]||(e[2]=[U(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}}),G=q(j,[["__scopeId","data-v-71aa7c81"]]);export{G as default};
