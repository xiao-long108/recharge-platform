import{d as D,r as p,x as O,c,b as e,e as a,i as o,h as V,L,z as _,m as M,n as S,w as f,B as T,M as k,o as i,f as m,p as $,t as v,T as z,a0 as E,k as g}from"./index-4bcZGDoL.js";import{a as F,s as H,d as P}from"./user-CwnAAeo_.js";import{C as y}from"./CreditCardOutlined-D1C0uqY8.js";import"./request-C-LQhwRX.js";const R={class:"page-container !pb-24"},U={class:"flex items-center bg-primary text-white p-4"},j={class:"p-3"},q=["onClick"],G={class:"w-12 h-12 bg-white/20 rounded-full flex-center mr-4"},I={class:"flex-1"},J={class:"text-base font-bold flex items-center gap-2"},K={class:"text-lg mt-2 tracking-wider"},Q={class:"text-xs opacity-90 mt-1"},W={key:0,class:"empty-state"},X={class:"fixed bottom-0 left-0 right-0 p-4 bg-card shadow-[0_-2px_10px_rgba(0,0,0,0.05)]"},at=D({__name:"BankAccount",setup(Y){const x=V(),u=p([]),l=p(!1),r=p(null);O(async()=>{await d()});async function d(){try{u.value=await F()}catch{}}function b(n){return!n||n.length<8?n:"**** **** **** "+n.slice(-4)}function w(n){r.value=n,l.value=!0}async function h(){if(r.value)try{await H(r.value.id),g.success("设置成功"),l.value=!1,await d()}catch{}}async function C(){r.value&&k.confirm({title:"提示",content:"确定要删除该银行卡吗？",async onOk(){await P(r.value.id),g.success("删除成功"),l.value=!1,await d()}})}return(n,t)=>{const B=z,A=T,N=k;return i(),c("div",R,[e("div",U,[a(o(L),{class:"text-xl cursor-pointer",onClick:t[0]||(t[0]=s=>o(x).back())}),t[3]||(t[3]=e("span",{class:"flex-1 text-center text-lg font-bold"},"银行卡管理",-1)),t[4]||(t[4]=e("span",{class:"w-5"},null,-1))]),e("div",j,[(i(!0),c(M,null,S(u.value,s=>(i(),c("div",{key:s.id,class:"user-card-gradient rounded-xl p-5 mb-3 flex items-center cursor-pointer",onClick:Z=>w(s)},[e("div",G,[a(o(y),{class:"text-2xl"})]),e("div",I,[e("div",J,[m(v(s.bankName)+" ",1),s.isDefault?(i(),$(B,{key:0,color:"success",class:"!m-0"},{default:f(()=>[...t[5]||(t[5]=[m("默认",-1)])]),_:1})):_("",!0)]),e("div",K,v(b(s.accountNumber)),1),e("div",Q,v(s.accountHolder),1)])],8,q))),128)),u.value.length===0?(i(),c("div",W,[a(o(y),{class:"text-5xl mb-4"}),t[6]||(t[6]=e("p",null,"暂无银行卡",-1))])):_("",!0)]),e("div",X,[a(A,{type:"primary",size:"large",class:"w-full h-12",onClick:t[1]||(t[1]=s=>o(x).push("/bank-account/add"))},{default:f(()=>[a(o(E)),t[7]||(t[7]=m(" 添加银行卡 ",-1))]),_:1})]),a(N,{open:l.value,"onUpdate:open":t[2]||(t[2]=s=>l.value=s),title:"选择操作",footer:null,centered:""},{default:f(()=>[e("div",{class:"py-2"},[e("div",{class:"py-3 text-center cursor-pointer hover:bg-muted rounded",onClick:h}," 设为默认 "),e("div",{class:"py-3 text-center cursor-pointer text-destructive hover:bg-muted rounded",onClick:C}," 删除 ")])]),_:1},8,["open"])])}}});export{at as default};
