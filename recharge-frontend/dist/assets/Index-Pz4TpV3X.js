import{e as i,l as E,d as et,u as st,r as m,x as nt,y as ot,c as f,z as b,b as t,w as g,A as lt,i as r,t as d,R as at,C as rt,h as it,m as k,n as C,M as ct,o as v,p as ut,f as F,T as dt}from"./index-4bcZGDoL.js";import{g as vt}from"./user-CwnAAeo_.js";import{g as ft}from"./product-BlSYDnSq.js";import{g as R}from"./request-C-LQhwRX.js";import{M as mt}from"./MobileOutlined-C3fNM2V5.js";import{O as pt}from"./OrderedListOutlined-BJEYHryJ.js";import{W as xt}from"./WalletOutlined-Cls6Aq2s.js";import{G as gt}from"./GiftOutlined-DFMGQQuo.js";import{U as _t}from"./UserOutlined-DYgmDtbb.js";import{_ as bt}from"./_plugin-vue_export-helper-DlAUqK2U.js";var ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"}}]},name:"sound",theme:"outlined"};function A(l){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?Object(arguments[s]):{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){yt(l,u,o[u])})}return l}function yt(l,s,o){return s in l?Object.defineProperty(l,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[s]=o,l}var P=function(s,o){var a=A({},s,o.attrs);return i(E,A({},a,{icon:ht}),null)};P.displayName="SoundOutlined";P.inheritAttrs=!1;var Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"};function H(l){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?Object(arguments[s]):{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){wt(l,u,o[u])})}return l}function wt(l,s,o){return s in l?Object.defineProperty(l,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):l[s]=o,l}var L=function(s,o){var a=H({},s,o.attrs);return i(E,H({},a,{icon:Ot}),null)};L.displayName="TagOutlined";L.inheritAttrs=!1;function kt(l=5){return R("/v1/notices/latest",{limit:l})}function Ct(){return R("/v1/banners",{position:1})}const Pt={class:"page-container !pb-20"},Lt={key:0,class:"banner-wrapper"},$t=["onClick"],Mt=["src","alt"],St={class:"notice-content"},zt={class:"flex items-center"},It={class:"ml-3"},Nt={class:"text-lg font-bold"},Ut={class:"text-sm opacity-90 mt-1"},Tt={class:"flex mt-5"},Bt={class:"flex-1 text-center"},jt={class:"text-xl font-bold mt-1"},Vt={class:"flex-1 text-center"},Dt={class:"text-xl font-bold mt-1"},Ft={class:"card-box m-3 !p-5"},At={class:"grid grid-cols-5 gap-2"},Ht={class:"card-box m-3"},Et={class:"grid-4"},Rt=["onClick"],Gt={class:"text-base font-bold text-foreground"},Wt={class:"text-sm text-destructive mt-1"},qt={class:"text-xs text-muted-foreground mt-1"},Jt={class:"notice-list"},Qt=["onClick"],Xt={class:"notice-title"},Yt={class:"notice-time"},Zt={key:0,class:"notice-detail"},Kt={class:"detail-time"},te={class:"detail-content"},ee=et({__name:"Index",setup(l){const s=it(),o=st(),a=m(null),u=m([]),p=m([]),h=m([]),y=m(0),_=m(!1),O=m(!1),x=m(null);let w=null;nt(async()=>{await Promise.all([G(),W(),q(),J()]),p.value.length>1&&(w=setInterval(()=>{y.value=(y.value+1)%p.value.length},3e3))}),ot(()=>{w&&clearInterval(w)});async function G(){try{const c=await vt();a.value=c,o.setUserInfo(c)}catch{}}async function W(){try{u.value=await ft()}catch{}}async function q(){try{p.value=await kt(5)}catch{}}async function J(){try{h.value=await Ct()}catch{}}function Q(c){s.push({path:"/recharge",query:{productId:c.id}})}function X(c){c.linkUrl&&(window.location.href=c.linkUrl)}function Y(c){x.value=c,_.value=!1,O.value=!0}function $(c){return c?c.slice(0,10):""}return(c,e)=>{var S,z,I,N,U,T,B,j,V;const Z=lt,K=rt,tt=dt,M=ct;return v(),f("div",Pt,[h.value.length>0?(v(),f("div",Lt,[i(Z,{autoplay:"",dots:!0},{default:g(()=>[(v(!0),f(k,null,C(h.value,n=>(v(),f("div",{key:n.id,class:"banner-slide",onClick:D=>X(n)},[t("img",{src:n.imageUrl,alt:n.title},null,8,Mt)],8,$t))),128))]),_:1})])):b("",!0),p.value.length>0?(v(),f("div",{key:1,class:"notice-bar m-3",onClick:e[0]||(e[0]=n=>_.value=!0)},[i(r(P),{class:"text-primary mr-2"}),t("div",St,[t("span",null,d((S=p.value[y.value])==null?void 0:S.title),1)]),i(r(at),{class:"text-muted-foreground"})])):b("",!0),t("div",{class:"user-card-gradient mx-3 p-5 cursor-pointer rounded-xl",onClick:e[1]||(e[1]=n=>r(s).push("/profile"))},[t("div",zt,[i(K,{size:50,src:(z=a.value)==null?void 0:z.avatar},{icon:g(()=>[i(r(_t))]),_:1},8,["src"]),t("div",It,[t("div",Nt,d(((I=a.value)==null?void 0:I.nickname)||"用户"),1),t("div",Ut,d((N=a.value)==null?void 0:N.phone),1)])]),t("div",Tt,[t("div",Bt,[e[9]||(e[9]=t("div",{class:"text-sm opacity-90"},"余额",-1)),t("div",jt,"¥"+d(((T=(U=a.value)==null?void 0:U.balance)==null?void 0:T.toFixed(2))||"0.00"),1)]),t("div",Vt,[e[10]||(e[10]=t("div",{class:"text-sm opacity-90"},"佣金",-1)),t("div",Dt,"¥"+d(((j=(B=a.value)==null?void 0:B.commissionBalance)==null?void 0:j.toFixed(2))||"0.00"),1)])])]),t("div",Ft,[t("div",At,[t("div",{class:"flex-col-center cursor-pointer",onClick:e[2]||(e[2]=n=>r(s).push("/recharge"))},[i(r(mt),{class:"text-2xl text-primary mb-2"}),e[11]||(e[11]=t("span",{class:"text-xs text-muted-foreground"},"话费充值",-1))]),t("div",{class:"flex-col-center cursor-pointer",onClick:e[3]||(e[3]=n=>r(s).push("/order/list"))},[i(r(pt),{class:"text-2xl text-success mb-2"}),e[12]||(e[12]=t("span",{class:"text-xs text-muted-foreground"},"我的订单",-1))]),t("div",{class:"flex-col-center cursor-pointer",onClick:e[4]||(e[4]=n=>r(s).push("/withdraw"))},[i(r(xt),{class:"text-2xl text-warning mb-2"}),e[13]||(e[13]=t("span",{class:"text-xs text-muted-foreground"},"余额提现",-1))]),t("div",{class:"flex-col-center cursor-pointer",onClick:e[5]||(e[5]=n=>r(s).push("/sign"))},[i(r(gt),{class:"text-2xl text-destructive mb-2"}),e[14]||(e[14]=t("span",{class:"text-xs text-muted-foreground"},"每日签到",-1))]),t("div",{class:"flex-col-center cursor-pointer",onClick:e[6]||(e[6]=n=>r(s).push("/coupon"))},[i(r(L),{class:"text-2xl text-purple-500 mb-2"}),e[15]||(e[15]=t("span",{class:"text-xs text-muted-foreground"},"优惠券",-1))])])]),t("div",Ht,[e[16]||(e[16]=t("div",{class:"text-base font-bold text-foreground mb-4"},"热门充值",-1)),t("div",Et,[(v(!0),f(k,null,C(u.value,n=>(v(),f("div",{key:n.id,class:"product-item",onClick:D=>Q(n)},[t("div",Gt,d(n.faceValue)+"元",1),t("div",Wt,"¥"+d(n.salePrice.toFixed(2)),1),t("div",qt,d((n.discount*10).toFixed(1))+"折",1)],8,Rt))),128))])]),i(M,{open:_.value,"onUpdate:open":e[7]||(e[7]=n=>_.value=n),title:"系统公告",footer:null,width:"90%"},{default:g(()=>[t("div",Jt,[(v(!0),f(k,null,C(p.value,n=>(v(),f("div",{key:n.id,class:"notice-item",onClick:D=>Y(n)},[t("div",Xt,[n.isTop===1?(v(),ut(tt,{key:0,color:"red",size:"small"},{default:g(()=>[...e[17]||(e[17]=[F("置顶",-1)])]),_:1})):b("",!0),F(" "+d(n.title),1)]),t("div",Yt,d($(n.createdTime)),1)],8,Qt))),128))])]),_:1},8,["open"]),i(M,{open:O.value,"onUpdate:open":e[8]||(e[8]=n=>O.value=n),title:(V=x.value)==null?void 0:V.title,footer:null,width:"90%"},{default:g(()=>[x.value?(v(),f("div",Zt,[t("div",Kt,d($(x.value.createdTime)),1),t("div",te,d(x.value.content),1)])):b("",!0)]),_:1},8,["open","title"])])}}}),ve=bt(ee,[["__scopeId","data-v-ce5a4821"]]);export{ve as default};
