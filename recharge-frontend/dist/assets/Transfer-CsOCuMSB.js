import{d as D,u as M,D as v,v as O,r as l,x as P,c as x,b as t,e as u,i as y,h as V,L as j,t as d,I as z,w,B as L,M as R,o as _,f as q,j as E,k as p}from"./index-4bcZGDoL.js";import{g as F,t as Y,b as $}from"./yuebao-BgJm-NR9.js";import{g as G}from"./user-CwnAAeo_.js";import"./request-C-LQhwRX.js";const H={class:"page-container !pb-24"},J={class:"flex items-center bg-primary text-white p-4"},K={class:"flex-1 text-center text-lg font-bold"},Q={class:"card-box m-3"},W={class:"flex justify-between items-center"},X={class:"text-sm text-muted-foreground"},Z={class:"text-lg font-bold text-primary"},ee={class:"card-box m-3"},te={class:"flex items-center border-b border-border pb-2"},se={class:"card-box m-3"},ae={key:0,class:"text-xs text-muted-foreground m-0"},oe={key:1,class:"text-xs text-muted-foreground m-0"},ne={class:"fixed bottom-0 left-0 right-0 p-4 bg-card shadow-[0_-2px_10px_rgba(0,0,0,0.05)]"},de=D({__name:"Transfer",setup(le){const b=V(),h=O(),k=M(),a=v(()=>h.query.type!=="out"),o=l(""),g=l(null),m=l(null),i=l(!1),r=l(""),f=l(!1),c=v(()=>{var s,e;return a.value?((s=m.value)==null?void 0:s.balance)||0:((e=g.value)==null?void 0:e.balance)||0}),I=v(()=>{const s=Number(o.value)||0;return s>0&&s<=c.value});P(async()=>{try{g.value=await F(),m.value=await G(),k.setUserInfo(m.value)}catch{}});function N(){o.value=String(c.value)}function S(){const s=Number(o.value)||0;if(s<=0)return p.error("请输入金额");if(s>c.value)return p.error("余额不足");i.value=!0}async function U(){if(!r.value||r.value.length!==6)return p.error("请输入6位支付密码");f.value=!0;try{const s={amount:Number(o.value),payPassword:r.value};a.value?await Y(s):await $(s),p.success("操作成功"),i.value=!1,b.back()}catch{}finally{f.value=!1}}return(s,e)=>{const B=z,C=L,T=E,A=R;return _(),x("div",H,[t("div",J,[u(y(j),{class:"text-xl cursor-pointer",onClick:e[0]||(e[0]=n=>y(b).back())}),t("span",K,d(a.value?"转入余额宝":"转出余额宝"),1),e[4]||(e[4]=t("span",{class:"w-5"},null,-1))]),t("div",Q,[t("div",W,[t("span",X,d(a.value?"可转入金额":"可转出金额"),1),t("span",Z,"¥"+d(c.value.toFixed(2)),1)])]),t("div",ee,[e[6]||(e[6]=t("div",{class:"text-sm text-foreground mb-2"},"转账金额",-1)),t("div",te,[e[5]||(e[5]=t("span",{class:"text-2xl text-foreground mr-2"},"¥",-1)),u(B,{value:o.value,"onUpdate:value":e[1]||(e[1]=n=>o.value=n),type:"number",placeholder:"请输入金额",bordered:!1,class:"!text-2xl flex-1"},null,8,["value"]),t("span",{class:"text-primary text-sm cursor-pointer",onClick:N},"全部")])]),t("div",se,[a.value?(_(),x("p",ae,"转入后次日开始计算收益，T+1到账")):(_(),x("p",oe,"转出后实时到账余额"))]),t("div",ne,[u(C,{type:"primary",size:"large",class:"w-full h-12",disabled:!I.value,onClick:S},{default:w(()=>[q(" 确认"+d(a.value?"转入":"转出"),1)]),_:1},8,["disabled"])]),u(A,{open:i.value,"onUpdate:open":e[3]||(e[3]=n=>i.value=n),title:"输入支付密码","confirm-loading":f.value,onOk:U},{default:w(()=>[u(T,{value:r.value,"onUpdate:value":e[2]||(e[2]=n=>r.value=n),placeholder:"请输入6位支付密码",maxlength:6,size:"large",class:"mt-4"},null,8,["value"])]),_:1},8,["open","confirm-loading"])])}}});export{de as default};
