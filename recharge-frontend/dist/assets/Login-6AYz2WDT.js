import{d as y,u as k,r as d,a as B,c as L,b as n,e as t,w as o,F as z,f as u,g as C,o as F,h as N,_ as R,I as U,i as m,j as V,B as q,k as I}from"./index-4bcZGDoL.js";import{l as M}from"./auth-Dh7f2SBH.js";import{M as O}from"./MobileOutlined-C3fNM2V5.js";import{L as S}from"./LockOutlined-CZ2hQJtr.js";import"./request-C-LQhwRX.js";const T={class:"min-h-screen bg-gradient-to-br from-primary to-[hsl(180,70%,45%)] px-5 py-16"},j={class:"bg-card rounded-xl p-6 max-w-md mx-auto shadow-lg"},E={class:"text-center mt-5 text-muted-foreground"},K=y({__name:"Login",setup($){const p=N(),_=k(),c=d(),a=d(!1),s=B({phone:"",password:""}),f={phone:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度不能少于6位"}]};async function g(){a.value=!0;try{const i=await M(s);_.setToken(i.token),I.success("登录成功"),p.push("/home")}catch{}finally{a.value=!1}}return(i,e)=>{const x=U,r=R,v=V,h=q,b=z,w=C("router-link");return F(),L("div",T,[e[5]||(e[5]=n("div",{class:"text-center text-white mb-10"},[n("h1",{class:"text-3xl font-bold mb-2"},"话费充值平台"),n("p",{class:"text-base opacity-90"},"欢迎登录")],-1)),n("div",j,[t(b,{ref_key:"formRef",ref:c,model:s,rules:f,layout:"vertical",onFinish:g},{default:o(()=>[t(r,{name:"phone"},{default:o(()=>[t(x,{value:s.phone,"onUpdate:value":e[0]||(e[0]=l=>s.phone=l),placeholder:"请输入手机号",size:"large",maxlength:11},{prefix:o(()=>[t(m(O),{class:"text-muted-foreground"})]),_:1},8,["value"])]),_:1}),t(r,{name:"password"},{default:o(()=>[t(v,{value:s.password,"onUpdate:value":e[1]||(e[1]=l=>s.password=l),placeholder:"请输入密码",size:"large"},{prefix:o(()=>[t(m(S),{class:"text-muted-foreground"})]),_:1},8,["value"])]),_:1}),t(r,null,{default:o(()=>[t(h,{type:"primary","html-type":"submit",size:"large",loading:a.value,class:"w-full h-12 text-base rounded-full"},{default:o(()=>[...e[2]||(e[2]=[u(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),n("div",E,[e[4]||(e[4]=u(" 还没有账号？ ",-1)),t(w,{to:"/register",class:"vben-link"},{default:o(()=>[...e[3]||(e[3]=[u("立即注册",-1)])]),_:1})])])])}}});export{K as default};
