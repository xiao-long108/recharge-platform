import{d as C,u as k,r as f,a as P,c as z,b as n,e as o,w as t,F as B,f as u,g as R,o as U,_ as q,I as F,i as l,j as N,B as O,h as V,k as E}from"./index-4bcZGDoL.js";import{r as G}from"./auth-Dh7f2SBH.js";import{M as I}from"./MobileOutlined-C3fNM2V5.js";import{L as c}from"./LockOutlined-CZ2hQJtr.js";import{G as L}from"./GiftOutlined-DFMGQQuo.js";import"./request-C-LQhwRX.js";const M={class:"min-h-screen bg-gradient-to-br from-primary to-[hsl(180,70%,45%)] px-5 py-16"},S={class:"bg-card rounded-xl p-6 max-w-md mx-auto shadow-lg"},T={class:"text-center mt-5 text-muted-foreground"},W=C({__name:"Register",setup(j){const _=V(),v=k(),g=f(),i=f(!1),s=P({phone:"",password:"",confirmPassword:"",inviteCode:""}),w={phone:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度不能少于6位"}],confirmPassword:[{required:!0,message:"请确认密码"},{validator:async(d,e)=>{if(e!==s.password)throw new Error("两次输入的密码不一致")}}]};async function x(){i.value=!0;try{const d=await G({phone:s.phone,password:s.password,confirmPassword:s.confirmPassword,inviteCode:s.inviteCode||void 0});v.setToken(d.token),E.success("注册成功"),_.push("/home")}catch{}finally{i.value=!1}}return(d,e)=>{const m=F,a=q,p=N,h=O,b=B,y=R("router-link");return U(),z("div",M,[e[7]||(e[7]=n("div",{class:"text-center text-white mb-10"},[n("h1",{class:"text-3xl font-bold mb-2"},"话费充值平台"),n("p",{class:"text-base opacity-90"},"注册新账号")],-1)),n("div",S,[o(b,{ref_key:"formRef",ref:g,model:s,rules:w,layout:"vertical",onFinish:x},{default:t(()=>[o(a,{name:"phone"},{default:t(()=>[o(m,{value:s.phone,"onUpdate:value":e[0]||(e[0]=r=>s.phone=r),placeholder:"请输入手机号",size:"large",maxlength:11},{prefix:t(()=>[o(l(I),{class:"text-muted-foreground"})]),_:1},8,["value"])]),_:1}),o(a,{name:"password"},{default:t(()=>[o(p,{value:s.password,"onUpdate:value":e[1]||(e[1]=r=>s.password=r),placeholder:"请输入密码",size:"large"},{prefix:t(()=>[o(l(c),{class:"text-muted-foreground"})]),_:1},8,["value"])]),_:1}),o(a,{name:"confirmPassword"},{default:t(()=>[o(p,{value:s.confirmPassword,"onUpdate:value":e[2]||(e[2]=r=>s.confirmPassword=r),placeholder:"请确认密码",size:"large"},{prefix:t(()=>[o(l(c),{class:"text-muted-foreground"})]),_:1},8,["value"])]),_:1}),o(a,{name:"inviteCode"},{default:t(()=>[o(m,{value:s.inviteCode,"onUpdate:value":e[3]||(e[3]=r=>s.inviteCode=r),placeholder:"邀请码（选填）",size:"large"},{prefix:t(()=>[o(l(L),{class:"text-muted-foreground"})]),_:1},8,["value"])]),_:1}),o(a,null,{default:t(()=>[o(h,{type:"primary","html-type":"submit",size:"large",loading:i.value,class:"w-full h-12 text-base rounded-full"},{default:t(()=>[...e[4]||(e[4]=[u(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),n("div",T,[e[6]||(e[6]=u(" 已有账号？ ",-1)),o(y,{to:"/login",class:"vben-link"},{default:t(()=>[...e[5]||(e[5]=[u("立即登录",-1)])]),_:1})])])])}}});export{W as default};
