import{d as v,r as u,a as g,c as b,b as r,e as a,i as m,h as x,L as y,w as t,F as k,o as C,_ as B,j as h,B as q,f as F,k as N}from"./index-4bcZGDoL.js";import{f as R}from"./user-CwnAAeo_.js";import"./request-C-LQhwRX.js";const U={class:"page-container"},V={class:"flex items-center bg-primary text-white p-4"},E={class:"card-box m-3 p-5"},T=v({__name:"ChangePassword",setup(L){const i=x(),f=u(),n=u(!1),s=g({oldPassword:"",newPassword:"",confirmPassword:""}),w={oldPassword:[{required:!0,message:"请输入旧密码"}],newPassword:[{required:!0,message:"请输入新密码"},{min:6,message:"密码长度不能少于6位"}],confirmPassword:[{required:!0,message:"请确认新密码"},{validator:async(p,e)=>{if(e!==s.newPassword)throw new Error("两次输入的密码不一致")}}]};async function c(){n.value=!0;try{await R(s.oldPassword,s.newPassword),N.success("密码修改成功"),i.back()}catch{}finally{n.value=!1}}return(p,e)=>{const l=h,d=B,_=q,P=k;return C(),b("div",U,[r("div",V,[a(m(y),{class:"text-xl cursor-pointer",onClick:e[0]||(e[0]=o=>m(i).back())}),e[4]||(e[4]=r("span",{class:"flex-1 text-center text-lg font-bold"},"修改登录密码",-1)),e[5]||(e[5]=r("span",{class:"w-5"},null,-1))]),r("div",E,[a(P,{ref_key:"formRef",ref:f,model:s,rules:w,layout:"vertical",onFinish:c},{default:t(()=>[a(d,{label:"旧密码",name:"oldPassword"},{default:t(()=>[a(l,{value:s.oldPassword,"onUpdate:value":e[1]||(e[1]=o=>s.oldPassword=o),placeholder:"请输入旧密码"},null,8,["value"])]),_:1}),a(d,{label:"新密码",name:"newPassword"},{default:t(()=>[a(l,{value:s.newPassword,"onUpdate:value":e[2]||(e[2]=o=>s.newPassword=o),placeholder:"请输入新密码"},null,8,["value"])]),_:1}),a(d,{label:"确认密码",name:"confirmPassword"},{default:t(()=>[a(l,{value:s.confirmPassword,"onUpdate:value":e[3]||(e[3]=o=>s.confirmPassword=o),placeholder:"请确认新密码"},null,8,["value"])]),_:1}),a(_,{type:"primary","html-type":"submit",size:"large",loading:n.value,class:"w-full h-11 mt-5"},{default:t(()=>[...e[6]||(e[6]=[F(" 确认修改 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])])])}}});export{T as default};
