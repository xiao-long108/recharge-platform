import{d as M,r as v,x as N,c as r,b as s,e as n,i as c,h as O,L as B,w as f,N as V,z as _,m as $,n as j,O as z,o,P as L,t as i,s as Y,Q as D,p as y,f as g,B as F,S as K,M as H,k as P}from"./index-4bcZGDoL.js";import{a as q,b as A}from"./order-BCzdytcL.js";import"./request-C-LQhwRX.js";const E={class:"page-container"},I={class:"flex items-center bg-primary text-white p-4"},Q={class:"p-3"},R=["onClick"],U={class:"flex justify-between items-center pb-3 border-b border-border"},G={class:"text-sm text-muted-foreground"},J={class:"flex justify-between items-center py-3"},W={class:"text-sm text-foreground"},X={class:"text-xs text-muted-foreground mt-1"},Z={class:"text-lg font-bold text-destructive"},tt={class:"flex justify-between items-center pt-3 border-t border-border"},et={class:"text-xs text-muted-foreground"},st={key:0,class:"empty-state"},lt=M({__name:"List",setup(at){const d=O(),u=v("all"),p=v([]);N(()=>{m()});async function m(){const a={all:void 0,pending:0,processing:1,completed:2};try{p.value=await q({status:a[u.value]})}catch{}}function k(a){return{0:"待支付",1:"充值中",2:"已完成",3:"已取消",4:"已退款"}[a]||"未知"}function C(a){return{0:"status-pending",1:"status-processing",2:"status-completed",3:"status-failed",4:"status-failed"}[a]||""}function h(a){return K(a).format("YYYY-MM-DD HH:mm")}function w(a){d.push({path:"/recharge/confirm",query:{orderId:a.id}})}async function S(a){H.confirm({title:"提示",content:"确定要取消该订单吗？",async onOk(){await A(a.id),P.success("订单已取消"),m()}})}return(a,t)=>{const l=L,T=V,x=F;return o(),r("div",E,[s("div",I,[n(c(B),{class:"text-xl cursor-pointer",onClick:t[0]||(t[0]=e=>c(d).back())}),t[3]||(t[3]=s("span",{class:"flex-1 text-center text-lg font-bold"},"我的订单",-1)),t[4]||(t[4]=s("span",{class:"w-5"},null,-1))]),n(T,{activeKey:u.value,"onUpdate:activeKey":t[1]||(t[1]=e=>u.value=e),class:"bg-card",onChange:m},{default:f(()=>[n(l,{key:"all",tab:"全部"}),n(l,{key:"pending",tab:"待支付"}),n(l,{key:"processing",tab:"充值中"}),n(l,{key:"completed",tab:"已完成"})]),_:1},8,["activeKey"]),s("div",Q,[(o(!0),r($,null,j(p.value,e=>(o(),r("div",{key:e.id,class:"card-box mb-3 cursor-pointer",onClick:b=>c(d).push(`/order/${e.id}`)},[s("div",U,[s("span",G,i(e.orderNo),1),s("span",{class:Y(["status-badge",C(e.orderStatus)])},i(k(e.orderStatus)),3)]),s("div",J,[s("div",null,[s("div",W,"充值号码："+i(e.phoneNumber),1),s("div",X,"面值："+i(e.faceValue)+"元",1)]),s("div",Z,"¥"+i(e.payAmount.toFixed(2)),1)]),s("div",tt,[s("span",et,i(h(e.createdTime)),1),s("div",{class:"flex gap-2",onClick:t[2]||(t[2]=D(()=>{},["stop"]))},[e.orderStatus===0?(o(),y(x,{key:0,type:"primary",size:"small",onClick:b=>w(e)},{default:f(()=>[...t[5]||(t[5]=[g(" 去支付 ",-1)])]),_:1},8,["onClick"])):_("",!0),e.orderStatus===0?(o(),y(x,{key:1,size:"small",onClick:b=>S(e)},{default:f(()=>[...t[6]||(t[6]=[g(" 取消 ",-1)])]),_:1},8,["onClick"])):_("",!0)])])],8,R))),128)),p.value.length===0?(o(),r("div",st,[n(c(z),{class:"text-5xl mb-4"}),t[7]||(t[7]=s("p",null,"暂无订单",-1))])):_("",!0)])])}}});export{lt as default};
