import{d as z,r as B,x as V,v as h,h as D,c as a,b as e,z as d,U as M,e as n,i as l,L as Y,s as v,p as f,V as I,W as $,X as A,Y as H,t as r,H as L,w as c,B as P,S as F,o,f as p,k as _,M as R}from"./index-4bcZGDoL.js";import{g as X,b as j}from"./order-BCzdytcL.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C-LQhwRX.js";const E={class:"page-container !pb-24"},U={class:"flex items-center bg-primary text-white p-4"},W={class:"text-xl font-bold"},G={key:4,class:"text-sm opacity-80 mt-2"},J={key:1,class:"card-box m-3"},K={class:"timeline"},Q={class:"timeline-content"},Z={class:"timeline-time"},tt={class:"timeline-content"},et={key:0,class:"timeline-time"},st={key:1,class:"timeline-time"},ot={class:"timeline-content"},it={key:0,class:"timeline-time"},at={key:1,class:"timeline-time"},lt={key:2,class:"timeline-time"},rt={class:"timeline-content"},dt={key:0,class:"timeline-time"},nt={key:2,class:"card-box m-3"},ut={class:"list-item"},mt={class:"flex items-center gap-2"},vt={class:"text-foreground text-sm"},ct={class:"list-item"},pt={class:"text-foreground"},ft={class:"list-item"},xt={class:"text-foreground"},bt={key:0,class:"list-item"},gt={class:"text-success"},yt={class:"list-item"},_t={class:"text-destructive font-bold text-lg"},kt={key:3,class:"card-box m-3"},St={class:"list-item"},Ct={class:"text-foreground"},wt={class:"list-item"},Tt={class:"text-foreground"},Nt={key:4,class:"fixed bottom-0 left-0 right-0 bg-card p-4 shadow-[0_-2px_10px_rgba(0,0,0,0.05)]"},Ot={key:0,class:"flex gap-3"},zt={key:1,class:"flex gap-3"},Bt={key:2},Vt=z({__name:"Detail",setup(ht){const u=D(),k=h(),s=B(null);V(async()=>{const i=Number(k.params.id);i&&await g(i)});async function g(i){try{s.value=await X(i)}catch{u.back()}}function S(i){return{0:"待支付",1:"充值中",2:"充值成功",3:"已取消",4:"已退款"}[i]||"未知"}function C(i){return i===void 0?"":{0:"bg-gradient-to-r from-warning to-[hsl(42,84%,70%)]",1:"bg-gradient-to-r from-primary to-[hsl(212,100%,60%)]",2:"bg-gradient-to-r from-success to-[hsl(144,57%,68%)]",3:"bg-gradient-to-r from-muted to-[hsl(240,4.8%,75%)]",4:"bg-gradient-to-r from-destructive to-[hsl(359,100%,75%)]"}[i]||""}function w(i){return{1:"余额支付",2:"PIX支付",3:"信用卡支付"}[i]||"其他支付"}function x(i){return i?F(i).format("YYYY-MM-DD HH:mm:ss"):""}function T(){var i;(i=s.value)!=null&&i.orderNo&&(navigator.clipboard.writeText(s.value.orderNo),_.success("订单号已复制"))}function N(){s.value&&u.push({path:"/recharge/confirm",query:{orderId:s.value.id}})}async function O(){s.value&&R.confirm({title:"提示",content:"确定要取消该订单吗？",async onOk(){await j(s.value.id),_.success("订单已取消"),await g(s.value.id)}})}return(i,t)=>{var y;const m=P;return o(),a("div",E,[e("div",U,[n(l(Y),{class:"text-xl cursor-pointer",onClick:t[0]||(t[0]=b=>l(u).back())}),t[4]||(t[4]=e("span",{class:"flex-1 text-center text-lg font-bold"},"订单详情",-1)),t[5]||(t[5]=e("span",{class:"w-5"},null,-1))]),s.value?(o(),a("div",{key:0,class:v(["p-8 text-center text-white",C((y=s.value)==null?void 0:y.orderStatus)])},[s.value.orderStatus===2?(o(),f(l(I),{key:0,class:"text-5xl mb-3"})):s.value.orderStatus===1?(o(),f(l($),{key:1,class:"text-5xl mb-3 animate-spin"})):s.value.orderStatus===0?(o(),f(l(A),{key:2,class:"text-5xl mb-3"})):(o(),f(l(H),{key:3,class:"text-5xl mb-3"})),e("div",W,r(S(s.value.orderStatus)),1),s.value.orderStatus===1?(o(),a("div",G,"预计1-5分钟内完成")):d("",!0)],2)):d("",!0),s.value?(o(),a("div",J,[t[14]||(t[14]=e("div",{class:"text-base font-bold text-foreground mb-4 pb-3 border-b border-border"},"订单进度",-1)),e("div",K,[e("div",{class:v(["timeline-item",{active:!0}])},[t[7]||(t[7]=e("div",{class:"timeline-dot"},null,-1)),e("div",Q,[t[6]||(t[6]=e("div",{class:"timeline-title"},"提交订单",-1)),e("div",Z,r(x(s.value.createdTime)),1)])]),e("div",{class:v(["timeline-item",{active:s.value.payStatus===1}])},[t[9]||(t[9]=e("div",{class:"timeline-dot"},null,-1)),e("div",tt,[t[8]||(t[8]=e("div",{class:"timeline-title"},"支付完成",-1)),s.value.payTime?(o(),a("div",et,r(x(s.value.payTime)),1)):(o(),a("div",st,"等待支付"))])],2),e("div",{class:v(["timeline-item",{active:s.value.orderStatus===1||s.value.orderStatus===2}])},[t[11]||(t[11]=e("div",{class:"timeline-dot"},null,-1)),e("div",ot,[t[10]||(t[10]=e("div",{class:"timeline-title"},"充值处理",-1)),s.value.orderStatus===2?(o(),a("div",it,"充值成功")):s.value.orderStatus===1?(o(),a("div",at,"处理中...")):(o(),a("div",lt,"等待处理"))])],2),e("div",{class:v(["timeline-item",{active:s.value.orderStatus===2}])},[t[13]||(t[13]=e("div",{class:"timeline-dot"},null,-1)),e("div",rt,[t[12]||(t[12]=e("div",{class:"timeline-title"},"订单完成",-1)),s.value.orderStatus===2?(o(),a("div",dt,"已完成")):d("",!0)])],2)])])):d("",!0),s.value?(o(),a("div",nt,[t[20]||(t[20]=e("div",{class:"text-base font-bold text-foreground mb-4 pb-3 border-b border-border"},"订单信息",-1)),e("div",ut,[t[15]||(t[15]=e("span",{class:"text-muted-foreground"},"订单编号",-1)),e("div",mt,[e("span",vt,r(s.value.orderNo),1),n(l(L),{class:"text-primary cursor-pointer",onClick:T})])]),e("div",ct,[t[16]||(t[16]=e("span",{class:"text-muted-foreground"},"充值号码",-1)),e("span",pt,r(s.value.phoneNumber),1)]),e("div",ft,[t[17]||(t[17]=e("span",{class:"text-muted-foreground"},"充值面值",-1)),e("span",xt,r(s.value.faceValue)+"元",1)]),s.value.discountAmount>0?(o(),a("div",bt,[t[18]||(t[18]=e("span",{class:"text-muted-foreground"},"优惠金额",-1)),e("span",gt,"-¥"+r(s.value.discountAmount.toFixed(2)),1)])):d("",!0),e("div",yt,[t[19]||(t[19]=e("span",{class:"text-muted-foreground"},"实付金额",-1)),e("span",_t,"¥"+r(s.value.payAmount.toFixed(2)),1)])])):d("",!0),s.value&&s.value.payStatus===1?(o(),a("div",kt,[t[23]||(t[23]=e("div",{class:"text-base font-bold text-foreground mb-4 pb-3 border-b border-border"},"支付信息",-1)),e("div",St,[t[21]||(t[21]=e("span",{class:"text-muted-foreground"},"支付方式",-1)),e("span",Ct,r(w(s.value.payType)),1)]),e("div",wt,[t[22]||(t[22]=e("span",{class:"text-muted-foreground"},"支付时间",-1)),e("span",Tt,r(x(s.value.payTime)),1)])])):d("",!0),t[29]||(t[29]=M('<div class="card-box m-3" data-v-d6ba53f1><div class="text-base font-bold text-foreground mb-3" data-v-d6ba53f1>温馨提示</div><div class="text-sm text-muted-foreground leading-relaxed" data-v-d6ba53f1><p data-v-d6ba53f1>1. 充值到账时间一般为1-5分钟，高峰期可能延长</p><p class="mt-2" data-v-d6ba53f1>2. 如长时间未到账，请联系客服处理</p><p class="mt-2" data-v-d6ba53f1>3. 充值成功后不支持退款</p></div></div>',1)),s.value?(o(),a("div",Nt,[s.value.orderStatus===0?(o(),a("div",Ot,[n(m,{size:"large",class:"flex-1 h-11",onClick:O},{default:c(()=>[...t[24]||(t[24]=[p("取消订单",-1)])]),_:1}),n(m,{type:"primary",size:"large",class:"flex-1 h-11",onClick:N},{default:c(()=>[...t[25]||(t[25]=[p("立即支付",-1)])]),_:1})])):s.value.orderStatus===2?(o(),a("div",zt,[n(m,{size:"large",class:"flex-1 h-11",onClick:t[1]||(t[1]=b=>l(u).push("/order/list"))},{default:c(()=>[...t[26]||(t[26]=[p("查看全部订单",-1)])]),_:1}),n(m,{type:"primary",size:"large",class:"flex-1 h-11",onClick:t[2]||(t[2]=b=>l(u).push("/recharge"))},{default:c(()=>[...t[27]||(t[27]=[p("再充一单",-1)])]),_:1})])):(o(),a("div",Bt,[n(m,{type:"primary",size:"large",block:"",class:"h-11",onClick:t[3]||(t[3]=b=>l(u).push("/order/list"))},{default:c(()=>[...t[28]||(t[28]=[p("返回订单列表",-1)])]),_:1})]))])):d("",!0)])}}}),$t=q(Vt,[["__scopeId","data-v-d6ba53f1"]]);export{$t as default};
