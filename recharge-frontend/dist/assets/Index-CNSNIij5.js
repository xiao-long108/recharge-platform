import{d as B,r as f,D as _,x as N,c as i,b as a,U as V,e as u,i as v,h as L,L as O,t as o,s as y,m as g,$ as Y,n as D,w as b,M as z,k as G,o as d,z as k,p as T,a1 as U,B as j,f as E}from"./index-4bcZGDoL.js";import{g as q,p as A}from"./request-C-LQhwRX.js";import{G as S}from"./GiftOutlined-DFMGQQuo.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";function J(){return q("/v1/sign/info")}function K(){return A("/v1/sign")}const P={class:"page-container"},Q={class:"flex items-center bg-primary text-white p-4"},W={class:"sign-header"},X={class:"sign-stats"},Z={class:"stat-item"},ss={class:"stat-value"},as={class:"stat-item"},ts={class:"stat-value"},es={class:"sign-btn-wrapper"},ns={class:"sign-tip"},os={class:"card-box m-3"},ds={class:"flex justify-between items-center mb-4"},is={class:"text-sm text-muted-foreground"},ls={class:"calendar-header"},rs={class:"calendar-grid"},cs={class:"day-num"},us={class:"reward-modal"},vs={class:"reward-icon"},ps={class:"reward-amount"},gs={class:"reward-tip"},ms=B({__name:"Index",setup(fs){const h=L(),C=["日","一","二","三","四","五","六"],n=f({isSigned:!1,continuousDays:0,totalDays:0,todayReward:.5,signRecords:[]}),m=f(!1),w=f(0),M=_(()=>{const e=new Date;return`${e.getFullYear()}年${e.getMonth()+1}月`}),$=_(()=>{const e=new Date,s=e.getFullYear(),l=e.getMonth(),r=new Date(s,l,1).getDay(),t=new Date(s,l+1,0).getDate(),p=[];for(let c=0;c<r;c++)p.push(null);for(let c=1;c<=t;c++)p.push(c);return p}),F=e=>e===new Date().getDate(),x=e=>{const s=new Date,l=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`;return n.value.signRecords.some(r=>r.date===l&&r.signed)},I=async()=>{try{const e=await J();n.value=e}catch{}},R=async()=>{if(n.value.isSigned){G.info("今日已签到");return}try{const e=await K();w.value=e.reward,n.value.isSigned=!0,n.value.continuousDays=e.continuousDays,n.value.totalDays+=1,m.value=!0}catch{}};return N(()=>{I()}),(e,s)=>{const l=j,r=z;return d(),i("div",P,[a("div",Q,[u(v(O),{class:"text-xl cursor-pointer",onClick:s[0]||(s[0]=t=>v(h).back())}),s[3]||(s[3]=a("span",{class:"flex-1 text-center text-lg font-bold"},"每日签到",-1)),s[4]||(s[4]=a("span",{class:"w-5"},null,-1))]),a("div",W,[a("div",X,[a("div",Z,[a("div",ss,o(n.value.continuousDays),1),s[5]||(s[5]=a("div",{class:"stat-label"},"连续签到(天)",-1))]),s[7]||(s[7]=a("div",{class:"stat-divider"},null,-1)),a("div",as,[a("div",ts,o(n.value.totalDays),1),s[6]||(s[6]=a("div",{class:"stat-label"},"累计签到(天)",-1))])]),a("div",es,[a("div",{class:y(["sign-btn",{signed:n.value.isSigned}]),onClick:R},[n.value.isSigned?(d(),i(g,{key:0},[u(v(Y),{class:"text-2xl"}),s[8]||(s[8]=a("span",{class:"text-sm mt-1"},"已签到",-1))],64)):(d(),i(g,{key:1},[u(v(S),{class:"text-2xl"}),s[9]||(s[9]=a("span",{class:"text-sm mt-1"},"签到领奖",-1))],64))],2),a("div",ns,o(n.value.isSigned?"明天继续加油哦":`签到可获得 ¥${n.value.todayReward.toFixed(2)}`),1)])]),a("div",os,[a("div",ds,[s[10]||(s[10]=a("span",{class:"text-base font-bold text-foreground"},"本月签到",-1)),a("span",is,o(M.value),1)]),a("div",ls,[(d(),i(g,null,D(C,t=>a("div",{key:t,class:"calendar-weekday"},o(t),1)),64))]),a("div",rs,[(d(!0),i(g,null,D($.value,(t,p)=>(d(),i("div",{key:p,class:y(["calendar-day",{empty:!t,signed:t&&x(t),today:t&&F(t)}])},[t?(d(),i(g,{key:0},[a("span",cs,o(t),1),x(t)?(d(),T(v(U),{key:0,class:"sign-icon"})):k("",!0)],64)):k("",!0)],2))),128))])]),s[13]||(s[13]=V('<div class="card-box m-3" data-v-64a6a3a8><div class="text-base font-bold text-foreground mb-4" data-v-64a6a3a8>签到规则</div><div class="rules-list" data-v-64a6a3a8><div class="rule-item" data-v-64a6a3a8><span class="rule-dot" data-v-64a6a3a8></span><span data-v-64a6a3a8>每日签到可获得随机奖励 ¥0.1 - ¥1.0</span></div><div class="rule-item" data-v-64a6a3a8><span class="rule-dot" data-v-64a6a3a8></span><span data-v-64a6a3a8>连续签到7天额外奖励 ¥5.0</span></div><div class="rule-item" data-v-64a6a3a8><span class="rule-dot" data-v-64a6a3a8></span><span data-v-64a6a3a8>连续签到30天额外奖励 ¥20.0</span></div><div class="rule-item" data-v-64a6a3a8><span class="rule-dot" data-v-64a6a3a8></span><span data-v-64a6a3a8>奖励将自动发放到您的账户余额</span></div></div></div>',1)),u(r,{open:m.value,"onUpdate:open":s[2]||(s[2]=t=>m.value=t),footer:null,closable:!1,centered:"",width:"300px"},{default:b(()=>[a("div",us,[a("div",vs,[u(v(S))]),s[12]||(s[12]=a("div",{class:"reward-title"},"签到成功",-1)),a("div",ps,"+¥"+o(w.value.toFixed(2)),1),a("div",gs,"已连续签到 "+o(n.value.continuousDays)+" 天",1),u(l,{type:"primary",block:"",onClick:s[1]||(s[1]=t=>m.value=!1)},{default:b(()=>[...s[11]||(s[11]=[E(" 知道了 ",-1)])]),_:1})])]),_:1},8,["open"])])}}}),Ds=H(ms,[["__scopeId","data-v-64a6a3a8"]]);export{Ds as default};
